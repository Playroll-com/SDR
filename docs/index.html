<!DOCTYPE html>
<html>
<head>
    <title>Unsubscribe</title>
</head>
<body>
    <h1>Unsubscribe Page</h1>
    <script>
        // Extract query parameters from the initial link
        const urlParams = new URLSearchParams(window.location.search);
        // const esubject = urlParams.get('esubject');
        // const eto = urlParams.get('eto');
        // const edraftId = urlParams.get('edraftId');
        // const estage = urlParams.get('estage');
        const eurl= urlParams.get('eurl');

        // Create the final unsubscribe link with query parameters
        const unsubscribeLink = eurl;

        // Function to trigger the unsubscribe action
        function unsubscribe() {
            // Send a GET request to the unsubscribe link
            fetch(unsubscribeLink, {
                method: 'GET'
            })
            .then(function(response) {
                if (response.ok) {
                    console.log('Unsubscribe successful.');
                    // You can perform additional actions here if required
                } else {
                    console.error('Unsubscribe failed.');
                }
            })
            .catch(function(error) {
                console.error('Error:', error);
            });
        }
    </script>
    <button onclick="unsubscribe()">Unsubscribe</button>
</body>
</html>
