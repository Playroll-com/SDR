<!DOCTYPE html>
<html>
<head>
    <title>Unsubscribe</title>
</head>
<body>
    <h1>Unsubscribe Page</h1>
    <div id="responseMessage"></div>
    <script>
        // Extract query parameters from the initial link
        const urlParams = new URLSearchParams(window.location.search);
        // const esubject = urlParams.get('esubject');
        // const eto = urlParams.get('eto');
        // const edraftId = urlParams.get('edraftId');
        // const estage = urlParams.get('estage');
        const eurl= urlParams.get('eurl');

        // Create the final unsubscribe link with query parameters
        const unsubscribeLink = eurl;

        // Function to trigger the unsubscribe action
        function unsubscribe() {
            // Send a GET request to the unsubscribe link

            const responseMessageElement = document.getElementById('responseMessage');
            var res = "Successfully unsubscribed";
            try {
                var response = fetch(unsubscribeLink, {method: 'GET'})
            }
            catch (error) {
                res = "Error: " + error;
            }
            responseMessageElement.textContent = res;
        }
    </script>
    <button onclick="unsubscribe()">Unsubscribe</button>
</body>
</html>
